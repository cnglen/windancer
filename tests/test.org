

# this is a org file to test `windancer`, which is
# a parser and render
:properties:
:author: foo
:key: value
:end:
#+title: test
#+macro: color @@html:<span style="color:$1">$2</span>@@ @@latex:\textcolor{$1}{$2}@@
#+date: [2025-08-02 Sat 18:43]
#+OPTIONS: toc:nil
#+project: windancer
#+author: cnglen
#+author: contributor
#+email: cnglen@gmail.com
#+caption: a *bold* text
#+SETUPFILE: ~/.emacs.d/local/theme-readtheorg.setup
#+SETUPFILE: ~/.emacs.d/local/org-latex-cn.setup
#+macro: color @@html:<span style="color:$1">$2</span>@@@@latex:\textcolor{$1}{$2}@@
#+macro: bgcolor @@html:<span style="background-color:$1;">$2</span>@@@@latex:$2@@
#+latex_class: article
#+OPTIONS: H:4
#+HTML_HEAD: <style>pre.src{background:#282a36;color:#ffb86c;} </style>
#+render: nil

Zero-th Section: this is a */_bold-italic-underline_/*

* Heading without section, but with blank lines

* heading test

** DONE [#A] heading  :tag:test:
SCHEDULED: <1999-03-31 Wed>
:PROPERTIES:

:CUSTOM_ID: someid
:END:

** TODO [#A] heading                                               :tag:test:

** DOING [#A] heading                                              :tag:test:

foo bar

* Another heading with section

This is a section. It includes everything from "This is" down to "Last
heading", including the trailing blank lines.

* h1

上面的BlankLine属于HeadingRow.

This is a section of h1

上面的BlankLine属于section.

** h2

asdfadf adf a f

*** h3

the end


* indentation

  This paragraph will not contain
  a long sequence of spaces before "a".

  This paragraph does not have leading spaces according to the parser.

  #+begin_src emacs-lisp
    (+ 1 2)    
  #+end_src

  The above source block preserves two leading spaces inside the code
  after removing the common indentation.

* TODO [#A] COMMENT Title                                           :tag:a2%:





*  [#A]  Title  :电影:美术: 

a short line * faked_title



* title :tagb:taga:

* footnote test

This is a org [fn:1]. This is not markdown[fn:md]. This is luo [fn:luo]. This is [fn:3] . I'm bad[fn:2]. I love org[fn:1] bettern than md[fn:md]. this is a inline fn[fn:x:yy] and anonymous fn[fn::zz]. 中文[fn:祖冲之]

footnote reference: inside text.

footnote definition: no indentation allowed




another anonymous fn[fn::ZZ].

footnote defintion (Greater Element)

Footnote definitions must occur at the start of an /unindented/ line, and are structured according to the following pattern:


#+begin_example
[fn:LABEL] CONTENTS
#+end_example

- LABEL :: Either a number or an instance of the pattern WORD, where WORD represents a string consisting of word-constituent characters, hyphens and underscores (-_).
- CONTENTS (optional) :: A collection of *zero or more elements*. It ends at the next footnote definition, the next heading, two consecutive blank lines, or the end of buffer.


footnote reference (object):

Footnote references are structured according to one of the following patterns:

#+begin_src
[fn:LABEL]
[fn:LABEL:DEFINITION]
[fn::DEFINITION]
#+end_src

- LABEL :: A string containing one or more word constituent characters, hyphens and underscores (-_).
- DEFINITION (optional) :: One or more objects from the standard set, so long as opening and closing square brackets are balanced within DEFINITION.

If the reference follows the second pattern, it is called an “inline footnote”. If it follows the third pattern, i.e. if LABEL is omitted, it is called an “anonymous footnote”.

Note that the first pattern may not occur on an unindented line, as it is then a footnote definition.









* elements

** paragraph

Paragraphs are the default element, which means that any unrecognized
context is a paragraph.

Empty lines and other elements end paragraphs.

Paragraphs can contain the standard set of objects.

Drawer:
:d3:
a
:end:


block:
#+begin_SRC python
  print("hello")
#+end_src


comment:
# this is a comment


** greater element


*** list test

- item
- [@3] set to three
- [-] tag :: item contents
  * item, note whitespace in front

a:
 1.  asdf
 2.      sfd

item是一项，可以含list
- list由多个item组成
- item的内容可以含list

list: = item.repeated()
item := - context [list]



+ いいよ，こいよ
+ [@1] 伊已逝，吾亦逝
+ [@4] 意易失，吾亦逝
+ [@5] 逸一时，误一世
+ [@1] 疑一时，误一世
+ [@4] こめいじ　こいし


- 疑一时，误一世   ::   af t asf d asd as f asfd adf a df
- a :: asfa
+ [X] tag :: item contents
 * item, note whitespace in front


1) 1
   - 1.1.1
2) 2
   | a | b |
   |---+---|
   |   |   |

   #+begin_src python
     print("hi")
   #+end_src

3) 3


*** Greater Block 
#+begin_center
this is contents of a center block
#+end_center

#+begin_quote a b
this is contents of a quote block
#+end_quote

  #+begin_xxx
  this is contents of a special(xxx) block
  #+end_xxx


** lesser element

*** horizontal-rule

-----

-----

horizontal must has at least 5 dashes: 

----


*** keyword

#+key: value
#+KEY: VALUE
# #+call: not key word



*** latex environment

equation with number:

\begin{equation}  
\begin{split}
a=b+c
\end{split}
\end{equation}

equation without number:

\[
x = \sum_{i=1}^{n} i
\]



*** Lesser Block

#+begin_comment
comment content
#+end_comment

#+begin_example
example content
#+end_example

#+begin_verse
verse content
#+end_verse

#+caption: export block test
    #+begin_export html
      <span style="color:green;">hello org</span>
    #+end_export


#+begin_src python
  print("hello")

  def foo(s: int) -> int:
      s+1
#+end_src


** drawer test

:d1:
 this is the contents of drawer
 :end:


drawer within blank lines
:properties:

:add: asd


:dxx: asd



:end:



** test

A test:
- Item 1

- Item 2
  :drawer:
  inside item 2
  :end:


B test:
- a

- b


- c
  - c
    #+begin_src python
      print("xx")
    #+end_src

** unodered list

- a
  + a1
  + a2
- b
  * b1
  * b2
- c 
  1. c1
  2. c2
     
** descriptive list

- a :: I'm A
- b :: I'm B

** ordered list

1) 打开冰箱
2) 放入冰箱
3) 关闭冰箱


1) 打开冰箱
2) 放入冰箱
3) 关闭冰箱
   

a. asdf
b. df


** table test

#+CAPTION[object in table]: table with objects
#+attr_html: :border 2 :rules all :frame border
| object kind           | object value                     | supported in table cell |
|-----------------------+----------------------------------+-------------------------|
| 01 text markup        | *bold*                           | y                       |
| 02 entity             | \alpha                           | y                       |
| 03 latex fragment     | $\sum_{i=1}^{n} i$               | y                       |
| 04 superscript        | a_1                              | y                       |
| 05 subscript          | c^{2}                            | y                       |
| 06 plain text         | just text                        | y                       |
| 07 footnote-reference | [fn:1]                           | y                       |
| 08 line-break         | \\                               | n                       |
| 09 timestamp          | <1234-07-31>                     | y                       |
| 10 macro              | {{{title}}}                      | y                       |
| 11 radio-target       | <<<radio target 011>>>           | y                       |
| 12 target             | <<target 012>>                   | y                       |
| 13 plain link         | https://foo.bar                  | y                       |
| 14 angle link         | <mailto:foo@bar>                 | y                       |
| 15 radio link         | radio target 011                 | y                       |
| 16 regular link       | [[target 012]]                       | y                       |
| 17 statistics-cookie  | NA                               | n                       |
| 18 inline-babel-call  | NA                               | n                       |
| 19 inline-src-block   | NA                               | n                       |
| 20 citation           | [cite:@key]                      | y                       |
| 21 export-snippet     | @@html:<b>@@bold text@@html:</b> | y                       |
| 22 table-cell         | NA                               | n                       |
| 23 citation-reference | NA                               | n                       |


#+CAPTION: table
| Name       | Phone | Age | as  |
| /          | <r10> | <l> | <c> |
|------------+-------+-----+-----|
| Peter Jack |   123 | 2   |  4  |
| Anna       | 54321 | 125 | 999 |

#+CAPTION: table with formula
| N | N^2 | N^3 | N^4 | sqrt(n) | sqrt[4](N) |
|---+-----+-----+-----+---------+------------|
| / |   < |     |   > |       < |          > |
| 1 |   1 |   1 |   1 |       1 |          1 |
| 2 |   4 |   8 |  16 |  1.4142 |     1.1892 |
| 3 |   9 |  27 |  81 |  1.7321 |     1.3161 |
#+TBLFM: $2=$1^2::$3=$1^3::$4=$1^4::$5=sqrt($1)::$6=sqrt(sqrt(($1)))

#+CAPTION: table with formulas
|   | x |    z |
|---+---+------|
| ! | x |   z1 |
| # | 1 |  300 |
| # | 6 | 1800 |
| # | 5 | 1500 |
#+tblfM: $3=$x*300
#+TBLFM: $3=$x*1

table cell with objects:

table cell's CONTENT can contain:
- minimal set of objects:
  - _plain text_
  - _text markup_
  - _entities_
  - _LaTeX fragments_
  - _superscripts_
  - _subscripts_
- citations, export snippets,
- footnote references
- links
- macros
- radio targets
- targets
- timestamps

  
  






| *bold*      | entity: \alpha | latex fragment $a_b$ | a_b | [[https://www.foo.bar][link]] | my radio target | <2025-08-02> | [[target]] |   |
  


** fixed width
: This is a  
:
: fixed width area

** comment

# A “comment line” starts with a hash character (#) and either a whitespace character or the immediate end of the line.

# Comments consist of one or more consecutive comment lines.

  # Just a comment
  #
  # Over multiple lines

#

  
#a





* objects

minimal set objects(6)

01 text-markup: *bold*, /italic/, _underline_, +strike-throught+, ​~code~, =verbatim=

02 entity: \alpha

03 latex-fragment: $\sum_{i=1}^{n}i$

04 suscripot: a_{i,j}

05 supscript: a^3

06 plain-text: text

standard set object(21)

07 footnote-reference: [fn:1]

08 line-break: \\

09 timestamp: <1234-07-31>

10 macro: {{{title}}}

11 radio-target: <<<radio target>>>

12 target: 
<<target>>

13-16 link: plain link https://foo.bar, angle link <mailto:foo@bar>, radio link radio target, regular link [[target]]

17 statistics-cookie: todo

18 inline-babel-call: todo

19 inline-src-block: todo

20 citation: todo

21 export-snippet: todo


other objects (2):

22 table-cell:
| foo |   | bar |

23 citation-reference: todo



** DONE Entity
CLOSED: [2025-10-22 Wed 11:37]
:LOGBOOK:
- State "DONE"       from "DOING"      [2025-10-22 Wed 11:37]
:END:

pattern1: ​=\NAME=​ This is a entity \alpha, and another entity \beta, and last \Delta

pattern2: ​=\NAME{}=​ without spaces \pi{}d.

pattern3: ​=\_SPACES=​

\_   3spaces
\_                    20spaces
\_                     21spaces, split into 20 space entity + one space.


** DONE Latex fragment
CLOSED: [2025-10-22 Wed 11:38]
:LOGBOOK:
- State "DONE"       from              [2025-10-22 Wed 11:38]
:END:

- ​=\NAME BRACKETS=​: \enlargethispage{2\baselineskip}
- ​=\(CONTENTS\)=​: \(\pi=3.1415\)
- ​=\[CONTENTS\]=​: \[\sum_{n=1}^{n}n = \frac{n(n+1)}{2}$$\]  
- ​=PRE$BORDER1 BODY BORDER2$POST=​: $a+b$
- ​=PRE$CHAR$POST=​: $a$, $\pi$
- ​=$$CONTENTS$$=​: $$\sum_{n=1}^{n}n = \frac{n(n+1)}{2}$$

let $a=2$, \(b=2\), $c$ is sum of $a$ and $b$, then
$$c=a+b=3$$
\[a-b=1\]

\enlargethispage{2\baselineskip}
\enlargethispage[2\baselineskip]

If $a^2=b$ and \( b=2 \), then the solution must be either $$ a=+\sqrt{2} $$ or \[ a=-\sqrt{2} \].

$$a$ bad fragment


** DONE Export snippet
CLOSED: [2026-01-13 Tue 11:06]
:LOGBOOK:
- State "DONE"       from              [2026-01-13 Tue 11:06]
:END:

​=@@html:@@not bold text@@html:</b>@@=​: @@html:@@not bold text@@html:</b>@@

​=@@html:<b>@@bold text@@html:</b>@@=​: @@html:<b>@@bold text@@html:</b>@@

​=@@beamer:some code@@ ignored in html backend=​: @@beamer:some code@@ ignored in html backend


** DONE Line break
CLOSED: [2026-01-13 Tue 11:04]
:LOGBOOK:
- State "DONE"       from              [2026-01-13 Tue 11:04]
:END:

First line\\
Second line

Not line break \\\
since PRE is backslash.



*** case1: detected

[[https:///baidu.com][baidu]]\\
second line

*** case2: detected

text\\
second line

*** case3: detected

text\\  
second line

text  \\  
second line


*** case4: NOT detected

a \\\
b



** DONE Macro
CLOSED: [2026-01-13 Tue 10:30]
:PROPERTIES:
:CUSTOM_ID: macro test
:END:
:LOGBOOK:
- State "DONE"       from              [2026-01-13 Tue 10:30]
:END:

| macro name        | arguments     | raw reference                                  | rendered value                                   | kind                                                 | supported |
|-------------------+---------------+------------------------------------------------+--------------------------------------------------+------------------------------------------------------+-----------|
| title             |               | ={{{title}}}=                                  | {{{title}}}                                      | keyword(title)                                       |           |
| author            |               | ={{{author}}}=                                 | {{{author}}}                                     | keyword(author)                                      |           |
| author            |               | ={{{author()}}}=                               | {{{author}}}                                     | keyword(author)                                      |           |
| email             |               | ={{{email}}}=                                  | {{{email}}}                                      | keyword(email)                                       |           |
| keyword           | NAME          | ={{{keyword(project)}}}=                       | {{{keyword(project)}}}                           | keyword(NAME)                                        |           |
| date              |               | ={{{date}}}=                                   | {{{date}}}                                       | keyword(date)                                        |           |
| date              | FORMAT        | ={{{date(%Y-%m-%dT%H:%M:%S%z)}}}=              | {{{date(%Y-%m-%dT%H:%M:%S%z)}}}                  | format keyword(DATE) if it's a signle timestamp      |           |
|-------------------+---------------+------------------------------------------------+--------------------------------------------------+------------------------------------------------------+-----------|
| time              | FORMAT        | ={{{time(%Y-%m-%dT%H:%M:%S%z)}}}=              | {{{time(%Y-%m-%dT%H:%M:%S%z)}}}                  | export time                                          |           |
| modification-time | FORMAT        | ={{{modification-time(%Y-%m-%dT%H:%M:%S%z)}}}= | {{{modification-time(%Y-%m-%dT%H:%M:%S%z)}}}     | modification time                                    |           |
|-------------------+---------------+------------------------------------------------+--------------------------------------------------+------------------------------------------------------+-----------|
| input-file        |               | ={{{input-file}}}=                             | {{{input-file}}}                                 | filename of the exported file                        |           |
|-------------------+---------------+------------------------------------------------+--------------------------------------------------+------------------------------------------------------+-----------|
| property          | PROPERTY_NAME | ={{{property(custom_id)}}}=                    | {{{property(custom_id)}}}                        | value of property PROPERTY_NAME in the current entry | No        |
|-------------------+---------------+------------------------------------------------+--------------------------------------------------+------------------------------------------------------+-----------|
| n                 |               | ={{{n}}}=                                      | {{{n}}}                                          | number of macro expanded: NOT supported              | No        |
|-------------------+---------------+------------------------------------------------+--------------------------------------------------+------------------------------------------------------+-----------|
| color             |               | ={{{color(red, red text)}}}=                   | {{{color(red, red text)}}}                       | by =#+macro:=                                        |           |
|-------------------+---------------+------------------------------------------------+--------------------------------------------------+------------------------------------------------------+-----------|
| results           | value         |                                                | src_python{print("hello")} {{{results(=None=)}}} | inline source block                                  |           |

{{{color(red, tow line
of red)}}}


** Link Test
:PROPERTIES:
:ID:       e30bb0f4-a323-4dce-8f6b-2f3b060e6dd0
:END:

regular link: with description [[https://www.baidu.com][baidu]]; without description [[https://foo.bar][foo_bar]]; description with objects [[http://foo.bar][\alpha *bold* $a+b$ foo]]; fuzzy internal [[target]]

plain link: https://plainlink.org https://foo(bar).org

angle link: <mailto:xx@xx.com> <https://foo(bar).org>

radio link: my radio target, define three radio target <<<*bold* target>>> and <<<my radio target>>>  and <<<\alpha>>> and <<<$\alpha$>>>, then we have *bold* target, my radio target, notmyradio target and $\alpha$ and \alpha.


[[id:4f11c993-b0e7-4fbc-a325-4e2dff408e5e][音乐]]


#+name: Blossoming Swirls of Elegance
#+caption: This is a caption for the image linked below
#+caption: Blossoming Swirls of Elegance Free Vector Download
[[https://images.freeimages.com/image/previews/1b1/blossoming-swirls-of-elegance-5690563.jpg]]



*** image test

#+NAME: foo
#+begin_src mermaid :file ./assets/test_demo_git.png :cache yes :exports results
  flowchart RL
    WD[WorkingDirectory] -- git add --> SA[StageArea] -- git commit --> Repo[.git]
    Repo --> |git checkout| WD
#+end_src

#+RESULTS[442e341895730297fa3223727bed3168b836a95d]: foo
[[file:./assets/test_demo_git.png]]


** DONE timestamp
CLOSED: [2026-01-13 Tue 11:10]
:LOGBOOK:
- State "DONE"       from              [2026-01-13 Tue 11:10]
:END:

*** example
[2004-08-24 Tue]--[2004-08-26 Thu]

<2012-02-08 Wed 20:00 ++1d>

<2030-10-05 Sat +1m -3d>

*** p1
<1997-11-03>

<1997-11-03 Mon>

<1997-11-03 Mon 19:15>

<1997-11-03 Mon 19:15 +23d>


*** p2
<1997-11-03 Mon 19:15 +23d>--<1997-12-13>

<1997-11-03 Mon 19:15 +23d>--<1997-12-13 Mon>

<1997-11-03 Mon 19:15 +23d>--<1997-12-13 Mon 19:15>

<1997-11-03 Mon 19:15 +23d>--<1997-12-13 Mon 19:15 +23d>

<1997-11-03 19:15 +23d>--<1997-12-13>

<1997-11-03 +23d>--<1997-12-13 Mon>

<1997-11-03>--<1997-12-13 Mon 19:15>

<1997-11-03>--<1997-12-13 Mon 19:15 +23d>

<1997-11-03 19:15>--<1997-12-13 Mon 19:15 +23d>

<1997-11-03 Mon 19:15>--<1997-12-13 Mon 19:15 +23d>

<1997-11-03 Mon 19:15 +23d>--<1997-12-13 Mon 19:15 +23d>

*** p3
<1997-11-03 Mon 19:15-20:18 +23d>
  

** text-markup

*** basic test

a *bold*, a /italic/, a _underline_, a +strikethrough+, a ~code~, and a =verbatim= text

一个​*粗体*​、​/斜体/​、​_下划线_​、​+横划线+​、​~编程~​和​=字面=​文本

Not*bold* bad PRE

Not *bold*( bad POST

Not * bold* *bold * bad content

*** Nested test

a */bold-italic/* text

a *bold NOT/italic/* text

*/This text is bold and italic, _and this part is also underlined_./*

a */bold-italic/ *bold*

**** nested test

*/_bold-italic-underline_/*

*_/bold-underline-italic/_*

_/*underline-italic-bold*/_

_*/underline-bold-italic/*_

/_*italic-underline-bold*_/

/*_italic-bold-underline_*/

+/*_strikethrough-italic-bold-underline_*/+

+/_*strikethrough-italic-underline-bold*_/+

+/_*strikethrough-italic_*/+

*_~inner-most~_*

*_~=inner-most-include-equal=~_*

*_=~inner-most-include-tilde~=_*    

~=*_/inner-most-include-equal-star-underscore-slash/_*=~

 
未正确嵌套的处理，未定义:

 */abc/

 */abc/ _adf_

 */_abc/* bar_

 /*+/

 ** a **

 **a bold** : 2b

 ***a bold** : 2b
    
 ***a bold*** : 3b




***  object in markup

a *[[https://www.foo.org][foo]]* link

*** todo

a /i/ line

a ​*bold*​ line




b _*/underline-bold-italic/*_ line
c /_*italic-underline-bold*_/ line
d /*_italic-bold-underline_*/ line
e ~=*_/inner-most/_*=~ line



a *bold* line

a ~=*/bold_italic/*=~ line


中文​*bold*​测试




** superscript and subscript
*** superscript

simple

a^{34}

a^{(34)}

complex

a^{(34)+3}

a^{(385)+3}

a^{(385)+{a*b + (c/d) + a^{d}} + [d+e]}

a^{c+[d+e}

a^{c+(d+e}: bad

a^(c+4)

a^(c+4}: bad

complex with object

a^{foo *boldmarkup* bar}

a^{*boldmarkup*}

a^{*boldmarkup* foo \alpha}

a^{\alpha} 

a^(385+3 [[https://baidu.com][baidu]])

a^{385+3 [[https://baidu.com][baidu]]}

a single asterisk: b^*, ^^*, ,^*

an expression enclosed in curly brackets: a^{2}, a^{b{3}}, a^{b^{c}^{d}^{e}} (org-toggle-pretty-entities C-c C-x \)

sign(optional) chars final: foo^abc... a^+34, a^-12,889,,,,78.3\a, 10^24, 10^tau, 10^-12, 10^-tau, x^2-y^3, x^(2-i), x^{i^2}, a^2Kو b^(3+2),



b^[a]: bad

a^+aa,

*** subscript

a single asterisk: b_*, __*, ,_*

an expression enclosed in curly brackets: a_{2}, a_{b{3}}, a_{b_{c}_{d}_{e}} (org-toggle-pretty-entities C-c C-x \)

sign(optional) chars final: a_+34, a_-12,889,78.3\a, 10_24, 10_tau, 10_-12, 10_-tau, x_2-y_3, x_(2-i), x_{i_2}, a_2Kو b_(3+2),


** TODO inline source
:LOGBOOK:
- State "TODO"       from              [2026-01-09 Fri 22:26]
:END:

src_python{print("hello")} {{{results(=None=)}}}

src_cpp[:includes <iostream>]{std::cout<< "hi cpp" << std::endl;} {{{results(=hi cpp=)}}}


** target
<<<y>>>

<<y>>

<<yes a target>>

<<not a target   >>

<< not a target>>

<<not
a target>>

one item

<<target>>another item

Here we refer to item [[target][descript of target]]. (C-c C-o)



** radio target

define a radio target: <<<*bold* target>>>, reference a target *bold* target


** inline babel call

# call_NAME[HEADER1](ARGUMENTS)[HEADER2]
# call_NAME(ARGUMENTS)


** citation

[cite/style:common prefix ;prefix @key suffix; prefix @foo suffix ; common suffix]

[cite/a/f:c.f.;the very important @@atkey @ once;the crucial @baz vol. 3]

[cite:@key]


* Footnotes

[fn:祖冲之] pi
[fn:2] asdfaf 
[fn:1] org-mode is a text from emacs
[fn:md] markdown is another text std
[fn:3] this asdf asd f. 
[fn:luo] luo is here

